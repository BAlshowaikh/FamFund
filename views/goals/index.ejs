<section class="ff-section">
  <!-- Top row: title + actions -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="ff-section-title">Goals</h2>

    <div class="d-flex align-items-center gap-3">
      <!-- Search bar -->
      <div class="ff-search-wrapper">
        <i class="bi bi-search ff-search-icon"></i>
        <input
          type="text"
          class="form-control ff-search-input"
          placeholder="Type Goal Name..."
        />
      </div>

      <!-- Add + Filter buttons -->
      <% if (user.role == "Parent") { %>
        <a href="/goals/add"><button type="button" class="btn ff-icon-btn" title="Add Goal">
        <i class="bi bi-plus-lg"></i>
      </button></a>
      <% } %>
      <button type="button" class="btn ff-icon-btn" title="Filter">
        <i class="bi bi-funnel"></i>
      </button>
    </div>
  </div>

  <!-- Goals list -->
  <div class="ff-goals-list">
    <% if (goals && goals.length) { %>
      <% goals.forEach(goal => { %>
        <%- include('../partials/goal/_goalCard', { goal }) %>
      <% }) %>
    <% } else { %>
      <p class="text-muted mt-3">
        You donâ€™t have any goals yet. Start by adding your first family goal!
      </p>
    <% } %>
  </div>
  
<!-- Chatbot code -->
 <!-- Floating Financial Coach launcher button -->
<button
  id="ff-coach-launcher"
  type="button"
  class="btn ff-coach-launcher"
  title="Ask your money coach"
>
  <i class="bi bi-chat-dots"></i>
</button>

<!-- Financial Coach chat panel -->
<div id="ff-coach-panel" class="ff-coach-panel card shadow-sm">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div>
      <div class="fw-bold">FamFund Coach</div>
      <small class="text-muted">Friendly savings helper</small>
    </div>
    <button
      type="button"
      class="btn btn-sm btn-light border-0"
      id="ff-coach-close"
      aria-label="Close coach"
    >
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <div id="ff-coach-messages" class="ff-coach-messages">
    <!-- Messages will be rendered here -->
  </div>

  <form id="ff-coach-form" class="ff-coach-form border-top">
    <div class="input-group">
      <input
        id="ff-coach-input"
        type="text"
        class="form-control"
        placeholder="Ask me about your savings..."
        autocomplete="off"
      />
      <button class="btn btn-primary" type="submit">
        <i class="bi bi-send"></i>
      </button>
    </div>
  </form>
</div>

</section>

